<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.thymeleaf.org http://www.thymeleaf.org
  http://www.ultraq.net.nz/thymeleaf/layout http://www.ultraq.net.nz/thymeleaf/layout
  http://www.thymeleaf.org/thymeleaf-extras-springsecurity4 http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <link rel="stylesheet" href="/styles/normalize.css">
    <link rel="stylesheet" href="/styles/namedProperties.css">
    <link rel="stylesheet" href="/styles/headerNav.css">
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Signika+Negative:wght@300&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Signika Negative', sans-serif;
        }
    </style>
</head>
<body>
<div class="top-level-header-container flex">
    <div class ="sub-level-header-container flex only-flex-item beauty-margin">
        <nav class = "header-navigation flex only-flex-item">
            <div class= "navigation-link-container flex only-flex-item flex-space-between">
                <div class= "container-of-spans span-logo-container flex flex-item">
                    <span class="span-logo-holder"><a class="logo-link" th:href="@{/}">SCOTTSDALE<br />COMMUNITY<br />GARDEN</a></span>
                </div>
                <div class= "container-of-spans span-links-container flex flex-item">
                        <span class="span-header-link-container"><a href="">JOIN US!</a>
                        </span>
                    <span class="span-header-link-container"><a href="">ABOUT</a>
                        </span>

                    <div class="flex drop-down-holder" id="resources-drop-down-holder">
                                <span class="span-header-link-container span-hover-dropdown">RESOURCES
                                    <svg class="pad-svg" width="22" height="11">
                                        <path d="M 0 0 L 9 10 M 9 10 L 18 0" stroke-width="1" stroke="black"></path>
                                    </svg>
                                </span>
                        <div class="flex flex-vertical drop-down-menu" id="resources-drop-down-menu">
                            <div class="link-div-container flex">
                                <img id="pencil-icon" class="icon" src="images/icon-blog.png" alt="pencil icon"><a href="">BLOG</a>
                            </div>
                            <div class="link-div-container flex">
                                <img id="sun-icon" class="icon" src="images/icon-weather.png" alt="sun icon"><a href="">WEATHER, CLIMATE, ENERGY</a>
                            </div>
                            <div class="link-div-container flex">
                                <img id="brain-icon" class="icon" src="images/icon-class.png" alt=""><a href="">CLASSES</a>
                            </div>
                        </div>
                    </div>

                    <div class="flex drop-down-holder" id="events-drop-down-holder">
                                <span class="span-header-link-container span-hover-dropdown">EVENTS
                                    <svg class="pad-svg" width="22" height="11">
                                        <path d="M 0 0 L 9 10 M 9 10 L 18 0" stroke-width="1" stroke="black"></path>
                                    </svg>
                                </span>
                        <div class="flex flex-vertical drop-down-menu" id="events-drop-down-menu">
                            <div class="link-div-container flex">
                                <img class="icon" src="images/icon-charity.png" alt="pencil icon"><a href="">CHARITY</a>
                            </div>
                            <div class="link-div-container flex">
                                <img  class="icon" src="images/icon-market.png" alt="sun icon"><a href="">FARMER'S MARKET</a>
                            </div>
                            <div class="link-div-container flex">
                                <img  class="icon" src="images/icon-calendar.png" alt=""><a href="">CALENDAR</a>
                            </div>
                        </div>
                    </div>

                    <span class="span-header-link-container"><a href="@{/contact-us}">CONTACT US</a>
                        </span>
                </div>
                <div sec:authorize="isAnonymous()" class= "container-of-spans span-signin-container flex flex-item">
                    <span class="span-header-sign-in-container"><a th:href="@{/login}">SIGN-IN</a></span>
                </div>
                <div sec:authorize="isAuthenticated()" class="container-of-spans span-member-links-container flex flex-item">
                                <span th:text="${currentUser.getFullName().toUpperCase()}" class="span-header-link-container span-hover-dropdown">
                                    <svg class="pad-svg" width="22" height="11">
                                        <path d="M 0 0 L 9 10 M 9 10 L 18 0" stroke-width="1" stroke="black"></path>
                                    </svg>
                                </span>
                    <div class="flex flex-vertical invisible" id="hover-driven-side-panel">
                        <div class="flex flex-vertical" id="complete-side-menu-container">
                            <div class="container-of-spans side-menu-links-container"><span><a href="/members">MESSAGE BOARD</a></span></div>
                            <div class="container-of-spans side-menu-links-container"><span><a href="/members/leasables">LEASABLES</a></span></div>
                            <div class="container-of-spans side-menu-links-container"><span><a href="/members/member" >ACCOUNT</a></span></div>
                            <div class="container-of-spans side-menu-links-container"><span sec:authorize="hasRole('ROLE_ADMIN')"><a href="/admin">ADMIN</a></span></div>
                            <div class="container-of-spans side-menu-links-container"><span sec:authorize="isAuthenticated()"><a href="/logout">LOGOUT</a></span></div>
                        </div>
                    </div>
                </div>
                <div class="flex flex-item hidden-flower-button-container center-center-items pos-relative">
                    <button class=" flex flex-item hidden-flower-button center-center-items menu-item-click">
                        <svg viewbox= "0 0 48 48"   class="flower-button-svg center-center-items">
                            <path id="flower-button" d="M 24 18 L 24 30 C 32 30 32 18 24 18 M 24 18 L 24 30 C 16 30 16 18 24 18 M 24 24 C 0 0 24 0 24 24 M 24 24 C 0 24 0 0 24 24 M 24 24 C 48 0 24 0 24 24 M 24 24 C 48 24 48 0 24 24 M 24 24 C 0 48 0 24 24 24 M 24 24 C 24 48 0 48 24 24 M 24 24 C 48 48 48 24 24 24 M 24 24 C 24 48 48 48 24 24" stroke="black" stroke-width="1" fill="none" />
                        </svg>
                    </button>
                    <div class= "hidden-menu-container flex flex-item pos-absolute flex-vertical align-items-center">
                        <span class="block"><a href="#">JOIN US!</a></span>
                        <span class="block"><a href="#">ABOUT</a></span>
                        <button id="resources-button">RESOURCES
                            <svg class="pad-svg" width="22" height="11">
                                <path d="M 0 0 L 9 10 M 9 10 L 18 0" stroke-width="1" stroke="black"></path>
                            </svg>
                        </button>
                        <span id="resources-links" class="hide-resource-links"><a class="block" href="#">BLOG</a><a class="block" href="#">WEATHER, CLIMATE, ENERGY</a><a class="block" href="#">CLASSES</a></span>
                        <button id="events-button">EVENTS
                            <svg class="pad-svg" width="22" height="11">
                                <path d="M 0 0 L 9 10 M 9 10 L 18 0" stroke-width="1" stroke="black"></path>
                            </svg>
                        </button>
                        <span id="events-links" class="hide-event-links"><a class="block" href="#">CHARITY</a><a class="block" href="#">FARMERS MARKET</a><a class="block" href="#">CALENDAR</a></span>
                        <span><a href="contactUs.html">CONTACT US</a></span>
                        <span sec:authorize="isAnonymous()"><a th:href="@{/login}">SIGN IN</a></span>
                        <span sec:authorize="isAuthenticated()"><a th:href="@{/members}">MEMBERS</a></span>
                        <span sec:authorize="isAuthenticated()"><a th:href="@{/logout}">LOGOUT</a></span>
                    </div>
                </div>

            </div>
        </nav>
    </div>
</div>

<div>
    <form th:action="@{/members}" method="get">
        <input type="submit" value="Message Board">
    </form>
    <form th:action="@{/members/leasables}" method="get">
        <input type="submit" value="Leasables">
    </form>
    <form th:action="@{/members/leases}" method="get">
        <input type="submit" value="Your Leases">
    </form>
    <form th:action="@{/members/payments}" method="get">
        <input type="submit" value="Your Payments">
    </form>
    <form th:action="@{/members/history}" method="get">
        <input type="submit" value="Your Message History">
    </form>
    <form th:action="@{/members/member}" method="get">
        <input type="submit" value="Your Account Info">
    </form>
    <div sec:authorize="hasRole('ROLE_ADMIN')">
        <form th:action="@{/admin}" method="get">
            <input type="submit" value="Admin Panel">
        </form>
    </div>
</div>
<div th:if="${!#lists.isEmpty(memberLeases)}">
    <form id="myForm" method="post" th:action="@{/members/leases/}">
        <table>
            <thead>
            <th>
            <td>Lease ID</td>
            <td>Lease Member</td>
            <td>Lease Leasable</td>
            <td>Lease Start</td>
            <td>Lease End</td>
            <td>Lease Status</td>
            <td>Apply Updates</td>
            </th>
            </thead>
            <tbody>
            <tr th:each="lease:${memberLeases}" th:class="${lease.leaseId}">
                <td th:text="${lease.leaseId}"></td>
                <td th:text="${lease.member.firstName} + ' ' + ${lease.member.lastName}"></td>
                <td th:text="${lease.leasable.leasableCode}"></td>
                <td th:text="${lease.startDate}"></td>
                <td th:text="${lease.endDate}"></td>
                <td th:text="${lease.leaseStatus.leaseStatus}"></td>
                <td><input type="radio" th:attr="data-lease-identification=${lease.leaseId}" name="leaseId" class="updateLease"></td>
            </tr>
            </tbody>
        </table>
        <input type="submit" class="createLease" formaction="/members/leasables" value="Create New Lease"/>
        <input type="submit" id="deleteLease" formaction="/members/leases/" value="End Lease Early"/>
        <input type="submit" value="Update Lease"/>
    </form>
</div>

<div th:if="${#lists.isEmpty(memberLeases)}">
    <form action="/members/leasables" method="post">
        <p>You don't have any leases</p>
        <input type="submit" class="createLease" value="Lease some plots"/>
    </form>
</div>
<script>
    $(".updateLease").change(function() {
        var lease = document.querySelector(".updateLease:checked").dataset.leaseIdentification;
        var formElement = document.querySelector("#myForm");
        var deleteButton = document.querySelector("#deleteLease");
        formElement.setAttribute("action", "/admin/leases/update/" + lease);
        deleteButton.setAttribute("formaction", "/admin/leases/delete/" + lease);
    });
</script>
<div th:replace="fragments/general :: main-navigation-script"></div>
</body>
</html>